"use strict";(self.webpackChunkreact_mind_map=self.webpackChunkreact_mind_map||[]).push([[966],{4440:(e,r,s)=>{s.d(r,{Jp:()=>i,Zm:()=>a,kz:()=>n,or:()=>c,z8:()=>o});var t=s(6629);const a=e=>(0,t.$E)("/user/doLogin",{...e}),n=e=>(0,t.$E)("/user/register",{...e}),o=e=>(0,t.x4)("/user/getCaptcha",{...e}),c=e=>(0,t.$E)("/file/upload",e),i=e=>(0,t.x4)("/file/getFile",e)},6629:(e,r,s)=>{s.d(r,{$E:()=>m,ZF:()=>o,bj:()=>c,oJ:()=>n,x4:()=>d});var t=s(3057),a=s(6213);const n=e=>["200",200].includes(e),o=e=>["100005",100005].includes(e),c="",i=a.A.create({baseURL:"http://47.121.126.205:8099/file-api/v1",timeout:7e3,headers:{"Content-Type":"application/json;charset=utf-8"},withCredentials:!1});i.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject({code:e.response.data.status,data:e.response.data.error||"\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"})}));const m=(e,r)=>new Promise(((s,a)=>{const{getToken:n}=(0,t.Nv)(),o=n(),c={url:e,method:"post",data:Object.assign({...r}),headers:{token:o}};i.request(c).then((e=>{s(e.data)})).catch((e=>{a(e.message)}))})),d=(e,r)=>new Promise(((s,a)=>{const{getToken:n}=(0,t.Nv)(),o=n(),c={url:e,method:"get",params:r,headers:{token:o}};i.request(c).then((e=>{s(e.data)})).catch((e=>{a(e.message)}))}))},7289:(e,r,s)=>{s.d(r,{z:()=>a});var t=s(906);function a(){const e=(0,t.zy)(),r=new URLSearchParams(e.search),s={};return r.forEach(((e,r)=>{s[r]=e})),s}},2420:(e,r,s)=>{s.r(r),s.d(r,{default:()=>y});var t=s(7144),a=s(9692),n=s(7110),o=s(7342),c=s(7893),i=s(8499),m=s(4775),d=s(5043);const u="index_loginWarp__bO2PU",l="index_innerWarp__goM8E";var h=s(3722),p=s(8617),f=s(906),x=s(4440),j=s(6629),A=s(4612),g=s(3057),w=s(7289),v=s(579);const k=()=>{const e=(0,f.Zp)(),r=(0,w.z)(),s=(0,d.useMemo)((()=>{if(r.from)return`?from=${r.from}`}),[r]),{setToken:k}=(0,g.Nv)(),{setUserName:y}=(0,g.Mm)(),[_,b]=(0,d.useState)([]);return(0,v.jsx)("div",{className:u,children:(0,v.jsx)("div",{className:l,children:(0,v.jsxs)(c.A,{name:"login",initialValues:{remember:!0},onFinish:async s=>{const t=await(0,x.Zm)({username:s.username,passwordOrCaptcha:s.password});(0,j.oJ)(t.code)?(m.Ay.success({content:"\u767b\u5f55\u6210\u529f\uff0c\u5373\u5c06\u8df3\u8f6c"}),k(t.data.token),y(s.username),setTimeout((()=>{null!==r&&void 0!==r&&r.from&&(window.location.href=r.from),e("/")}),3e3)):m.Ay.error({content:t.data||"\u6ce8\u518c\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"})},children:[(0,v.jsx)(c.A.Item,{name:"username",rules:[{required:!0,validator:(e,r,s)=>{/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(r)?s():s(new Error("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1"))}}],children:(0,v.jsx)(i.A,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1\u7528\u6237\u540d",prefix:(0,v.jsx)(h.A,{}),onSearch:e=>{b((()=>!e||e.includes("@")?[]:A.MY.map((r=>({label:`${e}@${r}`,value:`${e}@${r}`})))))},options:_})}),(0,v.jsx)(c.A.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d85\u8fc76\u4f4d\u7684\u5bc6\u7801"}],children:(0,v.jsx)(o.A.Password,{minLength:6,prefix:(0,v.jsx)(p.A,{}),type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})}),(0,v.jsx)(c.A.Item,{children:(0,v.jsx)(a.A,{justify:"space-between",align:"center",children:(0,v.jsx)(c.A.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:(0,v.jsx)(n.A,{children:"\u8bb0\u4f4f\u72b6\u6001"})})})}),(0,v.jsxs)(c.A.Item,{children:[(0,v.jsx)(t.Ay,{block:!0,type:"primary",htmlType:"submit",children:"\u767b\u5f55"}),"\u6216",(0,v.jsx)(f.N_,{to:{pathname:"/reg",search:s},children:"\u53bb\u6ce8\u518c"})]})]})})})},y=(0,d.memo)(k)},4612:(e,r,s)=>{s.d(r,{KO:()=>a,LY:()=>n,MY:()=>t});const t=["qq.com","163.com","@sina.com","@aliyun.com","@16com","@18com","@hotmail.com","@sohu.com","@mail.com","gmail.com"],a="666888",n=2}}]);
//# sourceMappingURL=login.c07a0683.chunk.js.map